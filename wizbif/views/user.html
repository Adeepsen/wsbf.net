<h3 class="text-center">DJ Profile</h3>

<div class="text-center" ng-show="!check.editProfile">
	<h3><strong>Nah.</strong></h3>

	<p>It would seem that you aren't allowed to edit your profile.</p>
</div>

<form class="form-horizontal" name="form" ng-show="check.editProfile">
	<div class="form-group">
		<label class="col-sm-3 control-label">Username</label>
		<div class="col-sm-6">
			<p class="form-control-static">{{user.username}}</p>
		</div>
	</div>

	<div class="form-group">
		<label class="col-sm-3 control-label">First Name</label>
		<div class="col-sm-6">
			<p class="form-control-static">{{user.first_name}}</p>
		</div>
	</div>

	<div class="form-group">
		<label class="col-sm-3 control-label">Last Name</label>
		<div class="col-sm-6">
			<p class="form-control-static">{{user.last_name}}</p>
		</div>
	</div>

	<div class="form-group" ng-class="{'has-error': form.preferred_name.$touched && form.preferred_name.$invalid}">
		<label class="col-sm-3 control-label">Preferred Name</label>
		<div class="col-sm-6">
			<input class="form-control" name="preferred_name" ng-model="user.preferred_name" required/>
		</div>
	</div>

	<div class="form-group" ng-class="{'has-error': form.email_addr.$touched && form.email_addr.$invalid}">
		<label class="col-sm-3 control-label">Email Address</label>
		<div class="col-sm-6">
			<input class="form-control" type="email" name="email_addr" ng-model="user.email_addr" required/>
		</div>
	</div>

	<div class="form-group" ng-class="{'has-error': form.statusID.$touched && form.statusID.$invalid}">
		<label class="col-sm-3 control-label">Status</label>
		<div class="col-sm-6">
			<select class="form-control" name="statusID" ng-model="user.statusID" required>
				<option value="0">Active at WSBF</option>
				<option value="1">Semi-active at WSBF</option>
				<option value="2">Inactive at WSBF</option>
				<option value="4">Alumnus/Alumna</option>
			</select>
		</div>
	</div>

	<div class="form-group" ng-class="{'has-error': form.profile_paragraph.$invalid}">
		<label class="col-sm-3 control-label">About You</label>
		<div class="col-sm-6">
			<textarea class="form-control" name="profile_paragraph" ng-model="user.profile_paragraph" rows="5" maxlength="2500"></textarea>
			<samp class="help-block">{{user.profile_paragraph.length || 0}} characters entered and {{2500 - user.profile_paragraph.length}} characters remaining.</samp>
		</div>
	</div>

	<div class="form-group hidden">
		<label class="col-sm-3 control-label">Profile Picture</label>
		<div class="col-sm-6">
			<p class="form-control-static" ng-show="!user.has_picture">No current profile picture</p>
			<p class="form-control-static" ng-show="user.has_picture && !profile_picture">
				<img class="img-responsive" ng-src="images/users/{{user.username}}"/>
			</p>
			<p class="form-control-static" ng-show="profile_picture && form.profile_picture.$valid">
				<img class="img-responsive" ngf-thumbnail="profile_picture"/>
			</p>
			<input type="file" name="profile_picture" accept="image/*" ngf-select ng-model="profile_picture" ngf-max-size="1MB"/>
			<p class="form-control-static text-danger" ng-show="form.profile_picture.$error.maxSize">Max size: 1 MB</p>
		</div>
	</div>

	<div class="form-group hidden" ng-show="user.has_picture">
		<div class="col-sm-offset-3 col-sm-6 checkbox">
			<label>
				<input type="checkbox" ng-model="user.delete_picture"/>
				<span>Delete current profile picture</span>
			</label>
		</div>
	</div>

	<div class="form-group">
		<div class="col-sm-offset-3 col-sm-6">
			<h3>Active Shows</h3>
			<p ng-show="user.shows.length == 0">You have no currently active shows.</p>
		</div>
	</div>

	<div ng-repeat="s in user.shows">
		<div class="form-group">
			<div class="col-sm-offset-3 col-sm-6">
				<pre>Show {{$index + 1}}: {{days[s.dayID].day}} @ {{s.start_time}} - {{s.end_time}}</pre>
			</div>
		</div>

		<div class="form-group">
			<label class="col-sm-3 control-label">Show Name</label>
			<div class="col-sm-6">
				<input class="form-control" ng-model="s.show_name" required maxlength="255"/>
				<samp class="help-block">{{s.show_name.length || 0}} characters entered and {{255 - s.show_name.length}} characters remaining.</samp>
			</div>
		</div>

		<div class="form-group">
			<label class="col-sm-3 control-label">Show Type</label>
			<div class="col-sm-6">
				<p class="form-control-static">{{s.show_type}}</p>
			</div>
		</div>

		<div class="form-group">
			<label class="col-sm-3 control-label">DJ Alias</label>
			<div class="col-sm-6">
				<input class="form-control" ng-model="s.schedule_alias" maxlength="45"/>
				<samp class="help-block">{{s.schedule_alias.length || 0}} characters entered and {{45 - s.schedule_alias.length}} characters remaining.</samp>
			</div>
		</div>

		<div class="form-group">
			<label class="col-sm-3 control-label">Description</label>
			<div class="col-sm-6">
				<textarea class="form-control" ng-model="s.description" rows="5" maxlength="255"></textarea>
				<samp class="help-block">{{s.description.length || 0}} characters entered and {{2500 - s.description.length}} characters remaining.</samp>
			</div>
		</div>

		<div class="form-group">
			<label class="col-sm-3 control-label">Show Genre</label>
			<div class="col-sm-6">
				<!-- TODO: use general_genreID after database is updated -->
				<select class="form-control" name="genre" ng-model="s.genre" ng-options="g.genre as g.genre for g in general_genres">
					<option></option>
				</select>
			</div>
		</div>
	</div>

	<div class="form-group text-center">
		<div class="btn-group">
			<button type="button" class="btn btn-default" ng-disabled="form.$invalid" ng-click="save()">Save</button>
			<a class="btn btn-default" href="#/">Cancel</a>
		</div>
	</div>
</form>
